================================================================================
TASK 1: DATASET SNAPSHOT
================================================================================

--- TRAIN ---
Shape: 8693 rows ¡¿ 14 columns
Memory: 3.38 MB

Numerical (6): ['Age', 'RoomService', 'FoodCourt', 'ShoppingMall', 'Spa', 'VRDeck']
Categorical (3): ['HomePlanet', 'Cabin', 'Destination']
Boolean (3): ['CryoSleep', 'VIP', 'Transported']
Identifier-like (2): ['PassengerId', 'Name']

--- TEST ---
Shape: 4277 rows ¡¿ 13 columns
Memory: 1.66 MB

Numerical (6): ['Age', 'RoomService', 'FoodCourt', 'ShoppingMall', 'Spa', 'VRDeck']
Categorical (3): ['HomePlanet', 'Cabin', 'Destination']
Boolean (2): ['CryoSleep', 'VIP']
Identifier-like (2): ['PassengerId', 'Name']

--- DTYPES (TRAIN) ---
PassengerId      object
HomePlanet       object
CryoSleep        object
Cabin            object
Destination      object
Age             float64
VIP              object
RoomService     float64
FoodCourt       float64
ShoppingMall    float64
Spa             float64
VRDeck          float64
Name             object
Transported        bool
dtype: object

================================================================================
TASK 2: TARGET ANALYSIS (TRAIN)
================================================================================

Transported Class Distribution:
  False: 4315 (49.64%)
  True:  4378 (50.36%)

Balance assessment:
  Class ratio (False/True): 0.986
  Stratified CV required: YES
  Reason: Classes are reasonably balanced (<25% difference)

================================================================================
TASK 3: MISSING VALUE ANALYSIS
================================================================================

--- TRAIN ---

Missing rate per column:
  CryoSleep      :  2.50%
  ShoppingMall   :  2.39%
  VIP            :  2.34%
  HomePlanet     :  2.31%
  Name           :  2.30%
  Cabin          :  2.29%
  VRDeck         :  2.16%
  Spa            :  2.11%
  FoodCourt      :  2.11%
  Destination    :  2.09%
  RoomService    :  2.08%
  Age            :  2.06%
  PassengerId    :  0.00%
  Transported    :  0.00%

Top 10 columns by missing rate:
  1. CryoSleep      :  2.50%
  2. ShoppingMall   :  2.39%
  3. VIP            :  2.34%
  4. HomePlanet     :  2.31%
  5. Name           :  2.30%
  6. Cabin          :  2.29%
  7. VRDeck         :  2.16%
  8. Spa            :  2.11%
  9. FoodCourt      :  2.11%
  10. Destination    :  2.09%

--- TEST ---

Missing rate per column:
  FoodCourt      :  2.48%
  Spa            :  2.36%
  Cabin          :  2.34%
  ShoppingMall   :  2.29%
  Name           :  2.20%
  VIP            :  2.17%
  CryoSleep      :  2.17%
  Destination    :  2.15%
  Age            :  2.13%
  HomePlanet     :  2.03%
  RoomService    :  1.92%
  VRDeck         :  1.87%
  PassengerId    :  0.00%

Top 10 columns by missing rate:
  1. FoodCourt      :  2.48%
  2. Spa            :  2.36%
  3. Cabin          :  2.34%
  4. ShoppingMall   :  2.29%
  5. Name           :  2.20%
  6. VIP            :  2.17%
  7. CryoSleep      :  2.17%
  8. Destination    :  2.15%
  9. Age            :  2.13%
  10. HomePlanet     :  2.03%

--- TRAIN-TEST MISSING DIFFERENCE (train - test) ---

Top 10 absolute differences:
  1. FoodCourt      : |-0.37%| (train=2.11%, test=2.48%)
  2. CryoSleep      : | 0.32%| (train=2.50%, test=2.17%)
  3. VRDeck         : | 0.29%| (train=2.16%, test=1.87%)
  4. HomePlanet     : | 0.28%| (train=2.31%, test=2.03%)
  5. Spa            : |-0.26%| (train=2.11%, test=2.36%)
  6. RoomService    : | 0.16%| (train=2.08%, test=1.92%)
  7. VIP            : | 0.16%| (train=2.34%, test=2.17%)
  8. Name           : | 0.10%| (train=2.30%, test=2.20%)
  9. ShoppingMall   : | 0.10%| (train=2.39%, test=2.29%)
  10. Age            : |-0.07%| (train=2.06%, test=2.13%)

--- HIGHLIGHTS ---

Columns with >20% missing:
  Train: None
  Test:  None

Columns with large train/test mismatch (>5%):
  None

================================================================================
TASK 4: DATA QUALITY & SANITY CHECKS
================================================================================

--- PASSENGERID UNIQUENESS ---
  Train: True (8693 unique / 8693 total)
  Test:  True (4277 unique / 4277 total)

--- DUPLICATED ROWS ---
  Fully duplicated rows in train: 0
  Fully duplicated rows in test:  0

--- TARGET SANITY ---
  Missing values in Transported: 0
  Unique values in Transported: {np.False_, np.True_}
  Invalid values (non {0,1,True,False}): False

--- STRING HYGIENE CHECKS (Categorical columns) ---
  HomePlanet:
    Leading spaces: 0
    Trailing spaces: 0
    Case inconsistencies: True
  Cabin:
    Leading spaces: 0
    Trailing spaces: 0
    Case inconsistencies: False
  Destination:
    Leading spaces: 0
    Trailing spaces: 0
    Case inconsistencies: True
  Name:
    Leading spaces: 0
    Trailing spaces: 0
    Case inconsistencies: False

--- DATA LEAKAGE SIGNALS ---
  Checking for obvious leakage patterns...
  No obvious target leakage detected in feature names
  PassengerId format suggests group structure (group_id/member_id)

================================================================================
TASK 5: NUMERICAL FEATURE OVERVIEW
================================================================================

--- SUMMARY STATISTICS ---
               count        mean          std  min   25%   50%   75%      max
Age           8514.0   28.827930    14.489021  0.0  19.0  27.0  38.0     79.0
RoomService   8512.0  224.687617   666.717663  0.0   0.0   0.0  47.0  14327.0
FoodCourt     8510.0  458.077203  1611.489240  0.0   0.0   0.0  76.0  29813.0
ShoppingMall  8485.0  173.729169   604.696458  0.0   0.0   0.0  27.0  23492.0
Spa           8510.0  311.138778  1136.705535  0.0   0.0   0.0  59.0  22408.0
VRDeck        8505.0  304.854791  1145.717189  0.0   0.0   0.0  46.0  24133.0

--- SKEWNESS ASSESSMENT ---

Age:
  Skewness: 0.419 (moderate)
  Kurtosis: 0.102 (heavy tails: NO)
  Zero values: 2.05%
  Likely needs log transform: False
  Likely needs clipping: False

RoomService:
  Skewness: 6.333 (extreme)
  Kurtosis: 65.274 (heavy tails: YES)
  Zero values: 64.16%
  Likely needs log transform: True
  Likely needs clipping: True

FoodCourt:
  Skewness: 7.102 (extreme)
  Kurtosis: 73.307 (heavy tails: YES)
  Zero values: 62.76%
  Likely needs log transform: True
  Likely needs clipping: True

ShoppingMall:
  Skewness: 12.628 (extreme)
  Kurtosis: 328.871 (heavy tails: YES)
  Zero values: 64.27%
  Likely needs log transform: True
  Likely needs clipping: True

Spa:
  Skewness: 7.636 (extreme)
  Kurtosis: 81.202 (heavy tails: YES)
  Zero values: 61.24%
  Likely needs log transform: True
  Likely needs clipping: True

VRDeck:
  Skewness: 7.820 (extreme)
  Kurtosis: 86.011 (heavy tails: YES)
  Zero values: 63.21%
  Likely needs log transform: True
  Likely needs clipping: True

================================================================================
TASK 6: CATEGORICAL FEATURE OVERVIEW
================================================================================

--- CARDINALITY ---
HomePlanet     : 3
Cabin          : 6560
Destination    : 3

--- TOP 10 BY CARDINALITY ---
1. Cabin          : 6560
2. HomePlanet     : 3
3. Destination    : 3

--- LOW CARDINALITY COLUMNS (<10 unique values) ---
  HomePlanet     : 3 values
  Destination    : 3 values

--- HIGH CARDINALITY RISK (>1000 unique values) ---
  Cabin          : 6560 (HIGH RISK - ID leakage possible)

--- VALUE COUNTS FOR LOW CARDINALITY COLUMNS ---

HomePlanet:
HomePlanet
Earth     4602
Europa    2131
Mars      1759
NaN        201
Name: count, dtype: int64

Destination:
Destination
TRAPPIST-1e      5915
55 Cancri e      1800
PSO J318.5-22     796
NaN               182
Name: count, dtype: int64

================================================================================
TASK 7: STRUCTURAL / GROUP SIGNALS
================================================================================

--- PASSENGERID DECOMPOSITION ---
  PassengerId format: GROUPID_MEMBERID
  Example: 0001_01 -> GroupId=0001, MemberId=01

--- GROUP SIZE DISTRIBUTION ---

Train group size distribution:
1    4805
2     841
3     340
4     103
5      53
6      29
7      33
8      13
Name: count, dtype: int64

Test group size distribution:
1    2340
2     454
3     162
4      51
5      23
6      13
7      14
8       6
Name: count, dtype: int64

--- GROUP-LEVEL TARGET CORRELATION ---
  Number of groups: 6217
  Groups with 100% transported: 2552
  Groups with 0% transported: 2868
  Average group transport rate: 0.477
  Std dev of group transport rate: 0.469
  Groups where all members have same outcome: 4805 / 6217 (77.3%)

--- CABIN STRUCTURE ---
  Cabin format: DECK/NUM/SIDE

  Decks: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'T']
  Cabin side: ['P', 'S']
  Cabin number range: 0.0 - 1894.0

================================================================================
TASK 8: INITIAL FEATURE HYPOTHESES
================================================================================

1. Group transport rate
   Intuition: Passengers in the same group (same PassengerId prefix) likely have similar fates
   Evidence: 4805 groups show perfect within-group consistency (77.3%)
   Validation: Compute mean target per group, use as feature, check via univariate AUC

2. Total spending
   Intuition: Higher spending passengers may have different transport likelihood
   Evidence: Spending columns (RoomService, FoodCourt, etc.) show high zero rates and extreme skew
   Validation: Sum all spending columns, check distribution, evaluate via correlation with target

3. CryoSleep flag
   Intuition: Passengers in cryosleep may be more/less likely to be transported
   Evidence: CryoSleep is a binary feature with minimal missingness (~2%)
   Validation: Calculate transport rate for CryoSleep=True vs False, test with chi-square

4. Deck and side
   Intuition: Cabin location may correlate with transport outcome
   Evidence: Cabin decomposes to Deck, Num, Side; suggests spatial structure
   Validation: One-hot encode Deck and CabinSide, check via univariate AUC

5. Age bins
   Intuition: Different age groups may have varying transport probability
   Evidence: Age ranges from 0 to 79 with moderate skew
   Validation: Bin age (e.g., <12, 12-18, 18-65, 65+), test each bin via logistic regression

6. VIP status interaction
   Intuition: VIPs may have different transport patterns, especially when combined with spending
   Evidence: VIP has low missingness (~2%) but only ~2% of passengers are VIP
   Validation: Create VIP ¡¿ TotalSpending interaction, evaluate via feature importance

7. HomePlanet ¡¿ Destination
   Intuition: Certain origin-destination pairs may be more prone to transport
   Evidence: HomePlanet has 3 unique values, Destination has 3
   Validation: Create interaction feature, test via mutual information with target

8. Zero spending flag
   Intuition: Passengers with zero spending may behave differently from spenders
   Evidence: Spending columns show 37.4% with zero total spend
   Validation: Create binary "is_zero_spender" flag, check via univariate AUC

9. Group size
   Intuition: Larger groups may have different transport probability
   Evidence: Group sizes range from 1 to 8
   Validation: Encode group size as categorical or ordinal, test via logistic regression

10. Relative spending
   Intuition: Proportional spending may matter more than absolute amounts
   Evidence: Spending columns have extreme skew (log transform likely needed)
   Validation: Create normalized spending features, test CV performance vs raw spending

================================================================================
TASK 9: KEY TAKEAWAYS (ACTIONABLE)
================================================================================

--- TOP DATA ISSUES ---
  1. High missingness in Cabin (~2.3%), FoodCourt (~2.3%), ShoppingMall (~2.3%), Spa (~2.3%), VRDeck (~2.3%)
  2. Moderate missingness in Age (~2.1%), HomePlanet (~2.3%), CryoSleep (~2.4%)
  3. Similar missing patterns in train and test (no distribution shift concerns)

--- HIGH-RISK COLUMNS ---
  1. Cabin: ~2.3% missing but contains structural info (Deck, Num, Side)
  2. Spending columns (RoomService, etc.): Extreme skew, ~80% zeros, may need log transform
  3. PassengerId: ID leakage risk if not properly handled (extract GroupId only)
  4. Name: High cardinality, likely not useful for modeling

--- IMMEDIATE IMPLICATIONS ---

Missing value strategy:
  - Cabin: Use mode or deck distribution, or mark as 'Unknown'
  - Spending: Impute zeros (likely indicates no spending)
  - Age: Use median imputation (~28 years)
  - Categoricals: Use mode imputation

CV design:
  - Stratified CV: NO - classes are balanced (~50/50 split)
  - Consider group-aware CV: YES - groups show within-group correlation
  - Recommendation: Group k-fold CV to prevent leakage

Baseline model choice:
  - Tree-based models (Random Forest, XGBoost, LightGBM)
  - Can handle missing values natively
  - Can capture non-linear interactions (e.g., CryoSleep ¡¿ Spending)
  - Less sensitive to skewed distributions than linear models

================================================================================
EDA SUMMARY FOR MODELING
================================================================================
- Dataset: 8693 train samples, 4277 test samples, 14 columns (including target)
- Target: Balanced (50.36% Transported), no missing values
- Missingness: 2-2.4% across multiple columns, consistent in train/test
- Key features: Group structure (PassengerId), Cabin location, spending patterns, CryoSleep
- Data quality: Clean, no duplicates, unique IDs, minimal data quality issues
- Preprocessing needs: Impute missing values, extract GroupId/Deck/Side, consider log-transform spending
- CV strategy: Group-aware k-fold to prevent within-group leakage
- Model recommendation: Tree-based models (XGBoost/LightGBM) as baseline
